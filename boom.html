<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <title>hine.site</title>

    <style>
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            box-sizing: border-box;
        }

        body {
            height: 100vh;
        }

        .comm-flyer, svg {
            position: fixed;
            top: 0;
        }

        .comm-flyer {
            z-index: 500;

            top: 200px;
            left: 400px;
        }

        .comm-flyer2 {
            top: 100px;
            left: 200px;
        }

        .comm-flyer3 {
            top: 200px;
            left: 300px;
        }

        .boombox {
            display: none;
            position: fixed;
            z-index: 510;
        }

        .row {
            font-size: 0;
        }

        .box {
            width: 8px;
            height: 7px;

            display: inline-block;
            position: relative;
        }

        .hide {
            opacity: 0;
            transition: 200ms;
        }
    </style>
</head>
<body>

    <img class="comm-flyer" width="32px" src="./comm-01.webp">
    <img class="comm-flyer comm-flyer2" width="32px" src="./comm-01.webp">
    <img class="comm-flyer comm-flyer3" width="32px" src="./comm-01.webp">

    <svg height="100%" width="100%">
        <defs>
            <radialGradient id="grad1" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                <stop offset="0%" style="stop-color:rgb(227, 16, 2);stop-opacity:1"/>
                <stop offset="1000%" style="stop-color:rgb(227, 16, 2);stop-opacity:0"/>
            </radialGradient>
        </defs>

        <circle id="circle" cx="200" cy="70" r="18" fill="url(#grad1)"/>
        <line id="laser" x1="200" y1="70" x2="200" y2="70" style="stroke:rgba(227, 16, 2, .6);stroke-width: 1"/>
    </svg>

    <div id="boombox-template" class="boombox">
        <div class="row">
            <div class="box"></div>
            <div class="box" style="background-color: #ff7d30;"></div>
            <div class="box" style="background-color: #d5d5d5;"></div>
            <div class="box" style="background-color: #d5d5d5;"></div>
            <div class="box" style="background-color: #ff7d30;"></div>
            <div class="box"></div>
        </div>
        <div class="row">
            <div class="box"></div>
            <div class="box"></div>
            <div class="box" style="background-color: #d5d5d5;"></div>
            <div class="box" style="background-color: #d5d5d5;"></div>
            <div class="box"></div>
            <div class="box"></div>
        </div>
        <div class="row">
            <div class="box"></div>
            <div class="box"></div>
            <div class="box" style="background-color: #cccccc;"></div>
            <div class="box" style="background-color: #cccccc;"></div>
            <div class="box"></div>
            <div class="box"></div>
        </div>
        <div class="row">
            <div class="box"></div>
            <div class="box" style="background-color: #d8c29e;"></div>
            <div class="box" style="background-color: #c6c6c6;"></div>
            <div class="box" style="background-color: #c6c6c6;"></div>
            <div class="box" style="background-color: #cfb595;"></div>
            <div class="box"></div>
        </div>
        <div class="row">
            <div class="box" style="background-color: #dfc9a7;"></div>
            <div class="box" style="background-color: #b9b0aa;"></div>
            <div class="box" style="background-color: #e95600;"></div>
            <div class="box" style="background-color: #e95600;"></div>
            <div class="box" style="background-color: #bab7af;"></div>
            <div class="box" style="background-color: #d2b390;"></div>
        </div>
        <div class="row">
            <div class="box" style="background-color: #896749;"></div>
            <div class="box" style="background-color: #acacac;"></div>
            <div class="box" style="background-color: #a19b96;"></div>
            <div class="box" style="background-color: #a19b96;"></div>
            <div class="box" style="background-color: #b8b9b4;"></div>
            <div class="box" style="background-color: #cdac8c;"></div>
        </div>
        <div class="row">
            <div class="box" style="background-color: #aa8a6c;"></div>
            <div class="box" style="background-color: #acacac;"></div>
            <div class="box" style="background-color: #8c6951;"></div>
            <div class="box" style="background-color: #8c6951;"></div>
            <div class="box" style="background-color: #afadad;"></div>
            <div class="box" style="background-color: #906e50;"></div>
        </div>
        <div class="row">
            <div class="box"></div>
            <div class="box" style="background-color: #9e9a99;"></div>
            <div class="box" style="background-color: #8c6951;"></div>
            <div class="box" style="background-color: #8c6951;"></div>
            <div class="box" style="background-color: #665c54;"></div>
            <div class="box"></div>
        </div>
        <div class="row">
            <div class="box" style="background-color: #ffc727;"></div>
            <div class="box" style="background-color: #949494;"></div>
            <div class="box" style="background-color: #866242;"></div>
            <div class="box" style="background-color: #866242;"></div>
            <div class="box" style="background-color: #dddddd;"></div>
            <div class="box" style="background-color: #ffc727;"></div>
        </div>
        <div class="row">
            <div class="box" style="background-color: #dddddd;"></div>
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
            <div class="box" style="background-color: #dddddd;"></div>
        </div>
    </div>

    <script src="./jquery.min.js"></script>
    <script type="text/javascript">
        let circle = $('#circle');
        let laser = $('#laser');
        let boomBoxTemplate = $('#boombox-template')

        let circleX = 200;
        let circleY = 70;

        circle.attr({
            cx: circleX,
            cy: circleY
        });

        laser.attr({
            x1: circleX,
            y1: circleY,
            x2: circleX,
            y2: circleY
        });

        $('body').on('mousedown', '.comm-flyer', function (event) {
            let badge = $(this);
            let boomBox = boomBoxTemplate.clone().removeAttr('id').appendTo('body');

            laser.attr({
                x2: event.pageX,
                y2: event.pageY
            });

            badge.animate({
                width: "48px",
                height: "62px"
            });

            let badgeOffset = badge.offset();
            badge.hide();
            boomBox.css({
                top: badgeOffset.top,
                left: badgeOffset.left,
                display: 'block'
            });

            boomBox.find('.box').each(function (i, e) {
                $(this).animate({
                    top: getRandomWithNegative(100),
                    left: getRandomWithNegative(100),
                    opacity: 0
                }, {
                    duration: 500,
                    complete: function () {
                        boomBox.remove();
                    }
                });
            });

            // Reset laser
            setTimeout(function () {
                laser.attr({
                    x2: circleX,
                    y2: circleY
                });
            }, 50);
        });

        function getRandomWithNegative(max) {
            let random = Math.random();
            let negative = random < .5;

            let rando = (random * max);
            return (negative ? -rando : rando);
        }
    </script>
</body>
</html>
